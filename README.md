# 实时语音转写应用

这是一个基于Flask和Socket.IO的实时语音转写应用，使用OpenAI的Whisper模型进行语音识别。

## 功能特点

- 实时语音转写：边说边显示转写结果
- 多语言支持：支持中文、英语、日语等多种语言
- 繁简转换：支持中文繁体和简体之间的切换
- 高度可定制：提供丰富的设置选项，可根据需求调整

## 实时翻译场景优化

本应用已针对实时翻译场景进行了特别优化，主要包括：

1. **模型选择**：使用Small模型平衡准确性和速度，比Tiny模型更准确，同时比Medium模型更快
2. **ONNX加速**：启用ONNX版Silero VAD，提高语音检测处理效率
3. **语音检测优化**：
   - 启用Silero去活动检测，减少句子中间被错误分段的情况
   - 提高Silero灵敏度和降低WebRTC灵敏度，使语音检测更准确
   - 设置最小录音长度为0.3秒，过滤掉短暂噪音
4. **延迟优化**：
   - 减少语音后静音持续时间，加快句子结束检测
   - 减少预录制缓冲区长度，降低处理延迟
   - 启用静音提前转写，加快实时反馈
   - 减少波束搜索大小，加快处理速度
5. **中文优化**：添加中文提示词，提高中文识别准确率

这些优化使系统在实时翻译场景下表现更佳，特别是在需要快速响应的场景中。

## 使用方法

1. 启动应用后，允许浏览器访问麦克风
2. 开始说话，转写结果会实时显示在界面上
3. 点击右上角的设置图标可以调整语音识别参数
4. 使用"切换到繁体/简体"按钮可以在繁简中文之间切换显示

## 系统要求

- Python 3.8+
- CUDA支持（推荐，但不是必须）
- 麦克风

## 安装与运行

1. 克隆仓库
2. 安装依赖：`pip install -r requirements.txt`
3. 运行应用：`python flask_stt_app.py`
4. 在浏览器中访问：`http://localhost:5000`

## 自定义设置

应用提供了丰富的设置选项，可以根据需求进行调整：

- **基本设置**：模型大小、语言、实时转写模型等
- **高级设置**：计算类型、波束搜索大小、初始提示词等
- **语音检测设置**：灵敏度、静音持续时间、最小录音长度等
- **实时转写设置**：批处理大小、处理暂停时间等
- **系统设置**：缓冲区大小、采样率、调试模式等

## 许可证

MIT