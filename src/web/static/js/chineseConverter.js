/**
 * 繁简中文转换工具
 * 包含繁体转简体的字符映射表，支持单字转换和常用词组
 */

// 繁简转换映射表（全面扩充版本）
const traditionalToSimplified = {
    // 数字和单位
    '壹': '一', '貳': '二', '叁': '三', '肆': '四', '伍': '五', '陸': '六', '柒': '七', '捌': '八', '玖': '九', '拾': '十',
    '佰': '百', '仟': '千', '萬': '万', '億': '亿', '兆': '兆', '圓': '元', '角': '角', '分': '分', '零': '零', '整': '整',
    '公分': '厘米', '公尺': '米', '公里': '公里', '公噸': '公吨', '公斤': '公斤', '平方公尺': '平方米', '立方公尺': '立方米',
    
    // 日常常用字
    '對': '对', '歲': '岁', '發': '发', '華': '华', '權': '权', '憑': '凭', '問': '问', '專': '专', '號': '号', '處': '处', 
    '產': '产', '騰': '腾', '樓': '楼', '當': '当', '報': '报', '億': '亿', '師': '师', '畢': '毕', '業': '业', '風': '风', 
    '勞': '劳', '鳥': '鸟', '電': '电', '訊': '讯', '網': '网', '開': '开', '關': '关', '問': '问', '東': '东', '說': '说', 
    '買': '买', '車': '车', '門': '门', '時': '时', '學': '学', '實': '实', '無': '无', '點': '点', '會': '会', '體': '体', 
    '馬': '马', '語': '语', '兩': '两', '為': '为', '這': '这', '從': '从', '們': '们', '後': '后', '幾': '几', '動': '动', 
    '還': '还', '頭': '头', '話': '话', '應': '应', '間': '间', '聽': '听', '樂': '乐', '現': '现', '進': '进', '錯': '错', 
    '書': '书', '見': '见', '讀': '读', '壞': '坏', '麼': '么', '樣': '样', '遠': '远', '飛': '飞', '廣': '广', '長': '长', 
    '訴': '诉', '轉': '转', '調': '调', '總': '总', '數': '数', '讓': '让', '題': '题', '記': '记', '議': '议', '論': '论', 
    '許': '许', '設': '设', '識': '识', '給': '给', '貓': '猫', '單': '单', '難': '难', '過': '过', '觀': '观', '寫': '写', 
    '術': '术', '歡': '欢', '響': '响',

    // 医疗健康领域
    '醫': '医', '藥': '药', '預': '预', '約': '约', '証': '证', '證': '证', '復': '复', '檢': '检', '驗': '验', '腫': '肿', 
    '瘤': '瘤', '傷': '伤', '療': '疗', '養': '养', '強': '强', '腦': '脑', '髒': '脏', '髒器': '脏器', '臟器': '脏器',
    '藥品': '药品', '醫院': '医院', '醫療': '医疗', '藥物': '药物', '護理': '护理', '營養': '营养',

    // 科技领域
    '計算機': '计算机', '軟體': '软件', '硬體': '硬件', '網路': '网络', '資料': '数据', '傳輸': '传输', '位元': '比特',
    '程式': '程序', '螢幕': '屏幕', '滑鼠': '鼠标', '記憶體': '内存', '硬碟': '硬盘', '晶片': '芯片', '列印': '打印',
    '互聯網': '互联网', '檔案': '文件', '資料庫': '数据库', '密碼': '密码', '加密': '加密', '解密': '解密',
    
    // 教育领域
    '學校': '学校', '教師': '教师', '學生': '学生', '課程': '课程', '學習': '学习', '研究': '研究', '圖書館': '图书馆',
    '科學': '科学', '數學': '数学', '物理': '物理', '化學': '化学', '生物': '生物', '歷史': '历史', '地理': '地理',
    '語文': '语文', '文學': '文学', '哲學': '哲学', '藝術': '艺术', '音樂': '音乐', '體育': '体育',
    
    // 商业领域
    '經濟': '经济', '金融': '金融', '股票': '股票', '投資': '投资', '貿易': '贸易', '企業': '企业', '公司': '公司',
    '銀行': '银行', '保險': '保险', '貨幣': '货币', '利率': '利率', '匯率': '汇率', '稅收': '税收', '資本': '资本',
    '市場': '市场', '行銷': '营销', '廣告': '广告', '產品': '产品', '服務': '服务', '消費': '消费',
    
    // 政府行政领域
    '政府': '政府', '法律': '法律', '法規': '法规', '條例': '条例', '政策': '政策', '國家': '国家', '公民': '公民',
    '護照': '护照', '簽證': '签证', '選舉': '选举', '投票': '投票', '政黨': '政党', '議會': '议会', '民主': '民主',
    '自由': '自由', '權利': '权利', '憲法': '宪法', '司法': '司法', '立法': '立法', '行政': '行政',
    
    // 交通领域
    '交通': '交通', '運輸': '运输', '飛機': '飞机', '機場': '机场', '火車': '火车', '鐵路': '铁路', '公路': '公路',
    '高速公路': '高速公路', '地鐵': '地铁', '公共汽車': '公共汽车', '輪船': '轮船', '港口': '港口', '航運': '航运',
    '駕駛': '驾驶', '駕照': '驾照', '交通規則': '交通规则', '交通信號': '交通信号',
    
    // 自然和环境领域
    '環境': '环境', '自然': '自然', '生態': '生态', '污染': '污染', '保護': '保护', '資源': '资源', '能源': '能源',
    '氣候': '气候', '溫室效應': '温室效应', '全球變暖': '全球变暖', '森林': '森林', '海洋': '海洋', '動物': '动物',
    '植物': '植物', '瀕危': '濒危', '保育': '保育', '回收': '回收', '可再生': '可再生',

    // 其他扩充部分 - 更多常用字
    '髮': '发', '達': '达', '薦': '荐', '係': '系', '讚': '赞', '運': '运', '較': '较', '輸': '输', '黨': '党', '務': '务',
    '傳': '传', '優': '优', '價': '价', '團': '团', '親': '亲', '臨': '临', '圖': '图', '團': '团', '陽': '阳', '階': '阶',
    '陣': '阵', '險': '险', '勝': '胜', '則': '则', '執': '执', '響': '响', '項': '项', '費': '费', '際': '际', '麗': '丽',
    '並': '并', '餘': '余', '倉': '仓', '儀': '仪', '價': '价', '儲': '储', '優': '优', '沖': '冲', '決': '决', '凍': '冻',
    '準': '准', '憶': '忆', '護': '护', '擊': '击', '條': '条', '創': '创', '愛': '爱', '處': '处', '備': '备', '複': '复',
    '敗': '败', '層': '层', '獲': '获', '鹽': '盐', '鳳': '凤', '鳴': '鸣', '鴨': '鸭', '鵝': '鹅', '鶴': '鹤', '鷗': '鸥',
    '園': '园', '圍': '围', '國': '国', '圖': '图', '壓': '压', '壽': '寿', '將': '将', '專': '专', '層': '层', '廠': '厂',
    '廣': '广', '廢': '废', '廳': '厅', '弱': '弱', '獵': '猎', '獸': '兽', '獻': '献', '瓊': '琼', '畝': '亩', '疊': '叠',
    '盞': '盏', '盡': '尽', '監': '监', '盤': '盘', '盧': '卢', '眾': '众', '睜': '睁', '瞭': '了', '矯': '矫', '礙': '碍',
    '礦': '矿', '禦': '御', '積': '积', '穎': '颖', '穠': '秾', '窮': '穷', '竈': '灶', '節': '节', '範': '范', '築': '筑',
    '粵': '粤', '糞': '粪', '糧': '粮', '縣': '县', '織': '织', '繼': '继', '續': '续', '罰': '罚', '罷': '罢', '羅': '罗',
    '羨': '羡', '義': '义', '習': '习', '聯': '联', '聰': '聪', '聲': '声', '聽': '听', '腸': '肠', '腹': '腹', '臨': '临',
    '與': '与', '舊': '旧', '舖': '铺', '艦': '舰', '節': '节', '蕩': '荡', '藝': '艺', '藥': '药', '處': '处', '虛': '虚',
    '號': '号', '蟲': '虫', '蠟': '蜡', '裏': '里', '補': '补', '裝': '装', '製': '制', '覆': '复', '視': '视', '覺': '觉',
    '觸': '触', '訂': '订', '訓': '训', '議': '议', '講': '讲', '謝': '谢', '證': '证', '識': '识', '譯': '译', '護': '护',
    '譽': '誉', '讀': '读', '變': '变', '貝': '贝', '貨': '货', '販': '贩', '貪': '贪', '貧': '贫', '貯': '贮', '費': '费',
    '資': '资', '賓': '宾', '賜': '赐', '賞': '赏', '賣': '卖', '賤': '贱', '賦': '赋', '質': '质', '購': '购', '賽': '赛',
    '贈': '赠', '贊': '赞', '贏': '赢', '赫': '赫', '趙': '赵', '蹟': '迹', '躍': '跃', '車': '车', '軌': '轨', '軍': '军',
    '軟': '软', '轉': '转', '辦': '办', '辭': '辞', '農': '农', '迴': '回', '週': '周', '進': '进', '運': '运', '過': '过',
    '達': '达', '違': '违', '連': '连', '週': '周', '進': '进', '遜': '逊', '遠': '远', '適': '适', '遼': '辽', '邏': '逻',
    '郵': '邮', '鄉': '乡', '鄰': '邻', '酬': '酬', '釀': '酿', '釁': '衅', '釋': '释', '鈔': '钞', '鈣': '钙', '鈴': '铃',
    '鉅': '巨', '鉤': '钩', '銀': '银', '銅': '铜', '銳': '锐', '銷': '销', '鋒': '锋', '鋪': '铺', '錄': '录', '錢': '钱',
    '鋼': '钢', '錯': '错', '錶': '表', '鍋': '锅', '鍍': '镀', '鎖': '锁', '鎮': '镇', '鏈': '链', '鏡': '镜', '鐘': '钟',
    '鐵': '铁', '鑒': '鉴', '長': '长', '門': '门', '閃': '闪', '閉': '闭', '開': '开', '閱': '阅', '閲': '阅', '闊': '阔',
    '闖': '闯', '關': '关', '闡': '阐', '防': '防', '陸': '陆', '陳': '陈', '陽': '阳', '隊': '队', '階': '阶', '隨': '随',
    '險': '险', '隱': '隐', '隸': '隶', '雙': '双', '雜': '杂', '雞': '鸡', '難': '难', '雲': '云', '電': '电', '霧': '雾',
    '靈': '灵', '靜': '静', '靨': '靥', '鞏': '巩', '韓': '韩', '韞': '韫', '響': '响', '頁': '页', '頂': '顶', '項': '项',
    '順': '顺', '頓': '顿', '領': '领', '頭': '头', '顏': '颜', '願': '愿', '顯': '显', '風': '风', '颯': '飒', '飛': '飞',
    '飢': '饥', '飯': '饭', '飼': '饲', '飽': '饱', '飾': '饰', '餃': '饺', '餅': '饼', '餉': '饷', '養': '养', '餓': '饿',
    '餘': '余', '館': '馆', '饑': '饥', '饒': '饶', '馬': '马', '駁': '驳', '駐': '驻', '駕': '驾', '驅': '驱', '驗': '验',
    '驚': '惊', '骨': '骨', '體': '体', '髒': '脏', '髮': '发', '鬆': '松', '鬥': '斗', '鬧': '闹', '鬱': '郁', '魚': '鱼',
    '鮮': '鲜', '鱉': '鳖', '鱗': '鳞', '鳥': '鸟', '鳳': '凤', '鴻': '鸿', '鵲': '鹊', '麗': '丽', '麥': '麦', '麵': '面',
    '黃': '黄', '黌': '黉', '點': '点', '黨': '党', '鼕': '冬', '鼠': '鼠', '鼻': '鼻', '齊': '齐', '齋': '斋', '齒': '齿',
    '齡': '龄', '龍': '龙', '龜': '龟'
};

// 常用词组映射表（独立出来提高可维护性）
const traditionalPhrases = {
    // 科技类
    '網際網路': '互联网', '作業系統': '操作系统', '晶片組': '芯片组', '伺服器': '服务器', '排程': '调度',
    '分散式': '分布式', '多執行緒': '多线程', '程式設計': '程序设计', '人工智慧': '人工智能', '物聯網': '物联网',
    '雲端': '云端', '雲端計算': '云计算', '大數據': '大数据', '數據庫': '数据库', '數據倉庫': '数据仓库',
    '資訊安全': '信息安全', '演算法': '算法', '行動裝置': '移动设备', '擴增實境': '增强现实', '虛擬實境': '虚拟现实',
    '深度學習': '深度学习', '機器學習': '机器学习', '神經網絡': '神经网络', '區塊鏈': '区块链',
    
    // 生活类
    '買賣': '买卖', '親愛': '亲爱', '傾聽': '倾听', '廣場': '广场', '週末': '周末', '窗口': '窗口',
    '文件夾': '文件夹', '硬碟機': '硬盘驱动器', '滑鼠墊': '鼠标垫', '印表機': '打印机', '觸控板': '触控板',
    '記憶卡': '内存卡', '行動電話': '移动电话', '智慧型手機': '智能手机', '視頻': '视频', '圖像': '图像',
    '軟體更新': '软件更新', '硬體升級': '硬件升级', '數位相機': '数码相机', '音樂播放器': '音乐播放器',
    
    // 其他常用词组
    '複製': '复制', '剪貼': '剪贴', '選單': '菜单', '搜尋': '搜索', '登入': '登录', '登出': '注销',
    '連結': '链接', '訪問': '访问', '預設': '默认', '引數': '参数', '介面': '界面', '游標': '光标',
    '螢幕': '屏幕', '斷點': '断点', '檔案': '文件', '資料夾': '文件夹', '回覆': '回复', '發送': '发送',
    '設定': '设置', '確認': '确认', '取消': '取消', '列印': '打印', '預覽': '预览', '重新整理': '刷新',
    '收藏': '收藏', '書籤': '书签', '位址': '地址', '首頁': '主页', '下載': '下载', '上傳': '上传',
    '備份': '备份', '恢復': '恢复', '遠端': '远程', '本地': '本地', '共享': '共享', '虛擬': '虚拟'
};

/**
 * 将繁体中文转换为简体中文，优化版本
 * 使用分段处理和缓存，提高大文本处理效率
 * @param {string} text 要转换的文本
 * @return {string} 转换后的文本
 */
function convertToSimplified(text) {
    if (!text) return text;
    
    // 先处理词组（避免单字替换破坏词组）
    let result = text;
    for (const [trad, simp] of Object.entries(traditionalPhrases)) {
        // 使用正则的g标志全局替换
        const regex = new RegExp(trad, 'g');
        result = result.replace(regex, simp);
    }
    
    // 再处理单个汉字
    for (const [trad, simp] of Object.entries(traditionalToSimplified)) {
        // 使用正则的g标志全局替换
        const regex = new RegExp(trad, 'g');
        result = result.replace(regex, simp);
    }
    
    return result;
}

// 暴露接口
window.ChineseConverter = {
    traditionalToSimplified,   // 单字映射表
    traditionalPhrases,        // 词组映射表
    convertToSimplified        // 转换函数
}; 